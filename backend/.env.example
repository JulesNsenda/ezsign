# ==================================
# EzSign Backend Environment Variables
# ==================================
# Copy this file to .env and update with your actual values
# IMPORTANT: Never commit .env file to version control

# ==================================
# Application
# ==================================
NODE_ENV=development
PORT=3001
APP_NAME=EzSign
APP_URL=http://localhost:3000

# ==================================
# Database (PostgreSQL)
# ==================================
DATABASE_URL=postgresql://username:password@localhost:5432/ezsign
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=ezsign
DATABASE_USER=username
DATABASE_PASSWORD=password
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_SSL=false

# ==================================
# Redis
# ==================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==================================
# Authentication & Security
# ==================================
# Generate secure random strings for these secrets
# Example: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-here-change-me-min-32-characters
JWT_EXPIRATION=1d
JWT_REFRESH_SECRET=your-jwt-refresh-secret-here-change-me-min-32-characters
JWT_REFRESH_EXPIRATION=7d

# API Key encryption secret
API_KEY_SECRET=your-api-key-secret-here-change-me-min-32-characters

# Webhook signature secret
WEBHOOK_SECRET=your-webhook-secret-here-change-me-min-32-characters

# Password hashing (bcrypt rounds)
BCRYPT_ROUNDS=10

# ==================================
# Email (SMTP)
# ==================================
EMAIL_SMTP_HOST=smtp.example.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_SECURE=false
EMAIL_SMTP_USER=your-email@example.com
EMAIL_SMTP_PASS=your-email-password
EMAIL_FROM_NAME=EzSign
EMAIL_FROM_ADDRESS=noreply@example.com

# Email rate limiting
EMAIL_RATE_LIMIT_MAX=100
EMAIL_RATE_LIMIT_WINDOW_MS=3600000

# Reminder email settings
EMAIL_REMINDER_ENABLED=true
EMAIL_REMINDER_DELAY_HOURS=48

# ==================================
# File Storage
# ==================================
FILE_STORAGE_PATH=./storage
FILE_STORAGE_MAX_SIZE=10485760
FILE_STORAGE_ALLOWED_TYPES=application/pdf

# Document storage subdirectories
STORAGE_DOCUMENTS_DIR=documents
STORAGE_TEMPLATES_DIR=templates
STORAGE_SIGNATURES_DIR=signatures
STORAGE_TEMP_DIR=temp

# ==================================
# Rate Limiting
# ==================================
# General API rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# API Key rate limiting
RATE_LIMIT_API_KEY_MAX=1000
RATE_LIMIT_API_KEY_WINDOW_MS=3600000

# Signing link rate limiting
RATE_LIMIT_SIGNING_MAX=10
RATE_LIMIT_SIGNING_WINDOW_MS=300000

# ==================================
# CORS
# ==================================
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# ==================================
# Logging
# ==================================
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_FILES=7
LOG_MAX_SIZE=10m

# ==================================
# Job Queue (BullMQ)
# ==================================
QUEUE_EMAIL_CONCURRENCY=5
QUEUE_WEBHOOK_CONCURRENCY=3
QUEUE_PDF_CONCURRENCY=2

# Job retry configuration
QUEUE_MAX_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=60000
QUEUE_BACKOFF_TYPE=exponential

# ==================================
# Webhook Configuration
# ==================================
WEBHOOK_MAX_RETRIES=5
WEBHOOK_RETRY_DELAY=60000
WEBHOOK_RETRY_BACKOFF=exponential
WEBHOOK_TIMEOUT=30000

# ==================================
# Signing Links
# ==================================
SIGNING_LINK_EXPIRATION=604800000
SIGNING_LINK_TOKEN_LENGTH=32

# ==================================
# PDF Processing
# ==================================
PDF_MAX_PAGES=500
PDF_COMPRESSION_ENABLED=true
PDF_GENERATE_THUMBNAILS=true
PDF_THUMBNAIL_WIDTH=200

# ==================================
# API Documentation
# ==================================
SWAGGER_ENABLED=true
SWAGGER_PATH=/api/docs
SWAGGER_TITLE=EzSign API
SWAGGER_DESCRIPTION=Open-source document signing platform API
SWAGGER_VERSION=1.0

# ==================================
# Security
# ==================================
# Enable security headers
HELMET_ENABLED=true

# Content Security Policy
CSP_ENABLED=false

# Trust proxy (set to true if behind reverse proxy)
TRUST_PROXY=false

# ==================================
# Development
# ==================================
# Enable debug logging
DEBUG=false

# Hot reload
WATCH=true

# TypeScript incremental compilation
TS_NODE_TRANSPILE_ONLY=true
